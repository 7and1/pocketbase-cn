# PocketBase.cn Production Environment
# Copy this file to .env on the production server and fill in the values
# SECURITY WARNING: Never commit this file to version control

# ============================================================
# CORS Configuration
# ============================================================
# Comma-separated list of allowed origins for API requests
PB_CORS_ORIGINS=https://pocketbase.cn,https://www.pocketbase.cn

# ============================================================
# Security (REQUIRED)
# ============================================================
# CSRF protection secret - must be 32+ character random string
# Generate with: openssl rand -base64 32
PB_CSRF_SECRET=

# ============================================================
# External API Keys
# ============================================================
# GitHub API token (optional, increases rate limit from 60 to 5000/hr)
# Create at: https://github.com/settings/tokens
GITHUB_TOKEN=

# Resend API key for transactional emails
# Used for: newsletter confirmations, release notifications
# Get from: https://resend.com/api-keys
RESEND_API_KEY=

# From email for Resend emails
NEWSLETTER_FROM="PocketBase.cn <noreply@pocketbase.cn>"

# ============================================================
# Site Configuration
# ============================================================
# Public site URL for links in emails, webhooks, OAuth redirects
PUBLIC_SITE_URL=https://pocketbase.cn

# ============================================================
# Alerting & Webhooks
# ============================================================
# Webhook URL for deployment and health alerts (Discord/Slack)
# Discord format: https://discord.com/api/webhooks/.../...
# Slack format: https://hooks.slack.com/services/...
ALERT_WEBHOOK_URL=

# GitHub webhook secret for /api/webhooks/github/release
# Verify incoming release notifications from GitHub
# Generate with: openssl rand -hex 32
GITHUB_WEBHOOK_TOKEN=

# ============================================================
# Backup Configuration (Litestream R2)
# ============================================================
# Cloudflare R2 bucket name for database replication
LITESTREAM_BUCKET=pocketbase-cn-backups

# R2 S3 endpoint
# Format: https://<account_id>.r2.cloudflarestorage.com
PB_S3_ENDPOINT=https://.r2.cloudflarestorage.com

# R2 access credentials (API Token with R2 permissions)
# Create at: https://dash.cloudflare.com/profile/api-tokens
LITESTREAM_ACCESS_KEY_ID=
LITESTREAM_SECRET_ACCESS_KEY=

# ============================================================
# Monitoring Settings
# ============================================================
# Maximum allowed backup age before alerts (seconds)
# Default: 7200 (2 hours)
BACKUP_MAX_AGE_SECONDS=7200
